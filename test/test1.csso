
//	Harold Ozouf 	Epitech Rennes 
//	CssO project



//	Features:
//		- Import
//		- Class
//		- Inheritance
//		- Constant
//		- Constructor
//		- Function
//		- Static Function
//		- Child
//		- Property
//		- Function Whith Parameter
//		- Some Type (Pixel, Point, Color, Percent, Second, Url, Calc)
//		- Entry Point



//	Rules:
//		- Constant only in classes, mustn't be inside a function
//		- Constant can only contain: Pixel, Point, Color, Percent, Second, Url, Calc
//		- No this variable
//		- No calculs
//		- Static functions can be called without object instanciation
//		- Function can't be called without object instanciation
//		- Function and Object parameters can be passed by a Constant or by the Primitive Type
//		- File imported give access to all their classes and their imports


// 	-- CssO Syntax and AST--

Import "lib/Std.csso"

Class 	MyList Extends List {
	@color1: 			#424242;

	Function MyList(@str) :
		"li" 			-> Std.li();
		"li:hover" 		-> hover();
		"li a" 			-> New Link();
		"li a:after" 	-> after(@str);
	{
		Super();
		display: 		block;
		border: 		1px solid black;
	}

	Function hover() {
		color: 			@color1;
	}
	
	Function after(@str) {
		content: 		@str;
	}

	Static Function last() :
		"a" 			-> Std.a();
	{
		background: 	static;
	}
}

	// Class:
	// 	_name: 		'MyList';
	// 	_inherit: 	'List';
	// 	_body: 	[
	// 		Variable:
	// 			_name: 		'color1';
	// 			_value: 	Color: #424242;
	// 		Function:
	// 			_name: 		'MyList';
	// 			_static: 	false
	// 			_parameters [
	// 				"str"
	// 			]
	// 			_childs: [
	// 				Child:
	// 					_selector: 'li'
	// 					_value: 	StaticFunctionCall:
	// 						_class: 	'Std'
	// 						_name: 		'li'
	// 						_parameters: [];
	// 				Child:
	// 					_selector: 'li:hover'
	// 					_value: 	FunctionCall:
	// 						_name: 		'hover'
	// 						_parameters: [];
	// 				Child:
	// 					_selector: 'li a'
	// 					_value: 	ClassCall:
	// 						_name: 		'Link'
	// 						_parameters: [];
	// 				Child:
	// 					_selector: 	'li a:after';
	// 					_value: 	FunctionCall:
	// 						_name: 	 	'after';
	// 						_parameters: [
	// 							VariableCall: 'str'
	// 						]
	// 			]
	// 			_body: [
	// 				Property:
	// 					_name: 		'display'
	// 					_value: [
	// 						Value: 	block;
	// 					]
	// 				Property:
	// 					_name: 		'border'
	// 					_value: [
	// 						Pixel: 	'1'
	// 						Value: 	'solid'
	// 						Value: 	'black'
	// 					]
	// 			]
	// 		Function:
	// 			_name: 		'hover'
	// 			_static: 	false
	// 			_parameters: []
	// 			_body: [
	// 				Property:
	// 					_name: 	'color'
	// 					_value: [
	// 						VariableCall: 'color1'
	// 					]
	// 			]
	// 		Function:
	// 			_name: 			'after'
	// 			_static: 		false
	// 			_parameters:  	[
	// 				'str'
	// 			]
	// 			_body: [
	// 				Property:
	// 					_name: 	'content'
	// 					_value: [
	// 						VariableCall: 'str'
	// 					]
	// 			]
	// 		Function:
	// 			_name: 		'last'
	// 			_static: 	true
	// 			_parameters: []
	// 			_childs: [
	// 				Child:
	// 					_selector: 	'a';
	// 					_value: 	StaticFunctionCall:
	// 						_class: 	'Std'
	// 						_name: 		'a'
	// 						_parameters: [];
	// 					]	
	// 			]
	// 			_body: [
	// 				Property:
	// 					_name: 	'background'
	// 					_value: [
	// 						Value: 'yellow'
	// 					]
	// 			]
	// 	]




	// Html Class -> entry point


Class 	Html {
	@arrow: 	"->";
	@msg: 		"hello_world!";

	Function Html() :
		"ul" 			-> New MyList(@arrow);
		"h1"			-> setTitle(@msg);
	{
	}

	Function setTitle(@bg) {
		color: 			#424242;
		background: 	white url("plop.png"); // set background with "hello_world.png"
	}

}


	// Class:
	// 	_name: 	'Html';
	// 	_body: [
	// 		Function:
	// 			_name: 	'Html';
	// 			_body: [];
	// 			_childs: [
	// 				Child:
	// 					_selector: 	'ul';
	// 					_value: 	ClassCall:
	// 						_name: 	'MyList';
	// 						_arguments: [
	// 							String: "->"
	// 						]
	// 				Child:
	// 					_selector: 	'h1';
	// 					_value: 	FunctionCall:
	// 						_name: 	'setTitle';
	// 						_arguments: [
	// 							String: 'hello_world.png'
	// 						]
	// 			]
	// 		Function:
	// 			_name: 	"setTitle";
	// 			_body: [
	// 				Property:
	// 					_name: 		color;
	// 					_value: 	[Color: #424242];
	// 				Property:
	// 					_name: 		background;
	// 					_value: 	[
	// 						Value: 'white',
	// 						Url:
	// 							_target: 	VariableCall:
	// 								_name: 	'bg';
	// 					]

	// 			]
	// 	]


